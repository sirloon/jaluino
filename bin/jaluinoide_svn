#!/bin/bash

# launch location
ABSRELPATH=`dirname $0`

if echo $ABSRELPATH | grep -q ^/
then
    RUNFROM=$ABSRELPATH
else
    RUNFROM="`pwd`/`dirname $0`"
fi


# check Editra is in the place
which Editra > /dev/null 2>&1 
if [ "$?" != "0" ]
then
    echo "Can't find Editra executable in path. Is it installed ?"
    echo "You can download it from:"
    echo
    echo "           http://editra.org/download"
    echo
    exit 1
fi


# Set binary/exec paths
export JALUINO_ROOT="$RUNFROM/.."
export JALUINO_BIN="$JALUINO_ROOT/bin"
export JALLIB_ROOT="$RUNFROM/../3rdparty/jallib_svn"
export JALUINO_JALV2_DIR="$JALUINO_ROOT/3rdparty/jallib_svn/compiler"
export JALUINO_JALV2_EXEC="$JALUINO_JALV2_DIR/jalv2"
export JALUINO_TINYBL_DIR="$JALUINO_ROOT/bootloaders/tinybl/bin"
export JALUINO_TINYBL_EXEC="$JALUINO_TINYBL_DIR/tinybld2"
export JALUINO_PDFUSB_DIR="$JALUINO_ROOT/bootloaders/pdfusb/bin"
export JALUINO_PDFUSB_EXEC="$JALUINO_PDFUSB_DIR/pdfusb"

# config
export JALUINO_LAUNCH_FILE="jaluino_svn_launch.xml"

echo "Running Jaluino IDE with:"
echo "    JALUINO_ROOT=$JALUINO_ROOT"
echo "    JALUINO_TINYBL_EXEC=$JALUINO_TINYBL_EXEC"
echo
echo "Adjusting PATH..."
export PATH="$JALUINO_TINYBL_DIR":"$JALUINO_JALV2_DIR":"$JALUINO_BIN":$PATH



Editra $*
